patrick@DESKTOP-PC01:~/championship/auditguard-v2$ raindrop logs tail -n 30
Using organization: org_01K8NJSJ98QQESZ0PPXFF2YQ4N
Using user: user_01K8RV423SG75TDJC3014RQN9B
Showing last 30 logs for auditguard-v2@01kap308m7dyxr5eftpgtn6epz...
üìú Showing last 30 log events:

[11/23/2025, 4:17:48 PM] üîó Trace: f37cb621f3cfa6d381eb96e88744d46b (88ms total)
  Org: org_01K8NJSJ98QQESZ0PPXFF2YQ4N, App: auditguard-v2, v01kap308m7dyxr5eftpgtn6epz, Script: organization-service
  1. ‚úÖ getUserOrganizations (88ms)
  2. ‚úÖ sql.all (33ms)
     üóÑÔ∏è  SQL Query: select "organizations"."id", "organizations"."name", "organizations"."slug", "organization_members"."role" from "organization_members" inner join "organizations" on "organizations"."id" = "organization_members"."organization_id" where "organization_members"."user_id" = ? order by "organization_members"."joined_at" asc
     üìä meta: 0.2449ms, 4 rows read, ENAM, DB: 1832.0KB
  3. ‚úÖ getUserOrganizations (148ms)
     service: ORGANIZATION_SERVICE
  4. ‚úÖ sql.all (28ms)
     üóÑÔ∏è  SQL Query: select count("id") as "count" from "organization_members" where "organization_id" = ?
     üìä meta: 0.3344ms, 2 rows read, ENAM, DB: 1832.0KB
  5. ‚úÖ sql.all (27ms)
     üóÑÔ∏è  SQL Query: select count("id") as "count" from "workspaces" where "organization_id" = ?
     üìä meta: 0.2077ms, ENAM, DB: 1832.0KB

[11/23/2025, 4:17:48 PM] üîó Trace: e69b8353ef901da52662bfb72c1bc799 (85ms total)
  Org: org_01K8NJSJ98QQESZ0PPXFF2YQ4N, App: auditguard-v2, v01kap308m7dyxr5eftpgtn6epz, Script: notification-service
  1. ‚úÖ getNotifications (85ms)
  2. ‚úÖ sql.all (28ms)
     üóÑÔ∏è  SQL Query: select * from "notifications" where "user_id" = ? and "read" = ? order by "created_at" desc limit ? offset ?
     üìä meta: 0.2629ms, 3 rows read, ENAM, DB: 1832.0KB
  3. ‚úÖ sql.all (29ms)
     üóÑÔ∏è  SQL Query: select count("id") as "count" from "notifications" where "user_id" = ?
     üìä meta: 0.2195ms, 3 rows read, ENAM, DB: 1832.0KB
  4. ‚úÖ sql.all (28ms)
     üóÑÔ∏è  SQL Query: select count("id") as "count" from "notifications" where "user_id" = ? and "read" = ?
     üìä meta: 0.192ms, 3 rows read, ENAM, DB: 1832.0KB

[11/23/2025, 4:17:53 PM] üîó Trace: af638d6cb22c7f1755ee599aad993496 (85ms total)
  Org: org_01K8NJSJ98QQESZ0PPXFF2YQ4N, App: auditguard-v2, v01kap308m7dyxr5eftpgtn6epz, Script: api-gateway
  1. ‚úÖ fetch (85ms)
     organization.id: org_01K8NJSJ98QQESZ0PPXFF2YQ4N
     service.namespace: auditguard-v2
     service.name: api-gateway
     service.version: 01kap308m7dyxr5eftpgtn6epz
     http.method: PATCH
     http.url: https://svc-01kap30j21msacq6g59j0jjezr.01k8njsj98qqesz0ppxff2yq4n.lmapp.run/api/notifications/kI2lYulrk1Q1lK05VPfGW/read
     http.scheme: https
     http.host: svc-01kap30j21msacq6g59j0jjezr.01k8njsj98qqesz0ppxff2yq4n.lmapp.run
     http.user_agent: undici
     http.content_type: undefined
     http.content_length: 0
     http.referer: undefined
     http.accept: */*
     http.accept_encoding: gzip, br
     http.accept_language: *
     http.authorization: [REDACTED]
     http.cf_ray: 9a33b22c1942175c
     http.cf_connecting_ip: 142.180.185.49
     http.cf_country: CA
     http.status: ‚ùå 500
  2. ‚úÖ validateSession (32ms)
     service: AUTH_SERVICE
  3. ‚úÖ validateSession (29ms)
  4. ‚úÖ sql.all (29ms)
     üóÑÔ∏è  SQL Query: select "users"."id" as "userId", "users"."email", "sessions"."expires_at" from "sessions" inner join "users" on "users"."id" = "sessions"."user_id" where "sessions"."id" = ? and "sessions"."expires_at" > ?
     üìä meta: 0.2097ms, 2 rows read, ENAM, DB: 1832.0KB
  5. ‚ùå fetch (0ms)
     service: NOTIFICATION_SERVICE
  6. ‚úÖ sql.run (53ms)
     üóÑÔ∏è  SQL Query:
          INSERT INTO performance_metrics (operation, start_time, end_time, duration, success, meta_info, error, created_at)
          VALUES (?1, ?2, ?3, ?4, ?5, ?6, ?7, ?8)

     üìä meta: 0.2399ms, 2 rows read, 5 rows written, ENAM, DB: 1832.0KB
  7. ‚úÖ log
     level: ERROR
     message: API Gateway error
     fields: {"path":"/api/notifications/kI2lYulrk1Q1lK05VPfGW/read","method":"PATCH","error":"Illegal invocation: function called with incorrect `this` reference. See https://developers.cloudflare.com/workers/observability/errors/#illegal-invocation-errors for details.","stack":"TypeError: Illegal invocation: function called with incorrect `this` reference. See https://developers.cloudflare.com/workers/observability/errors/#illegal-invocation-errors for details.\n    at Proxy.<anonymous> (runtime.js:19245:34)\n    at api_gateway_default.fetch (index.js:18478:52)\n    at async runtime.js:18433:26\n    at async _Wrapper.<computed> [as fetch] (runtime.js:18344:16)"}

[11/23/2025, 4:17:53 PM] üîó Trace: 26a73046678fdb78724da4a61324e3b0 (71ms total)
  Org: org_01K8NJSJ98QQESZ0PPXFF2YQ4N, App: auditguard-v2, v01kap308m7dyxr5eftpgtn6epz, Script: api-gateway
  1. ‚úÖ fetch (71ms)
     organization.id: org_01K8NJSJ98QQESZ0PPXFF2YQ4N
     service.namespace: auditguard-v2
     service.name: api-gateway
     service.version: 01kap308m7dyxr5eftpgtn6epz
     http.method: PATCH
     http.url: https://svc-01kap30j21msacq6g59j0jjezr.01k8njsj98qqesz0ppxff2yq4n.lmapp.run/api/notifications/kI2lYulrk1Q1lK05VPfGW/read
     http.scheme: https
     http.host: svc-01kap30j21msacq6g59j0jjezr.01k8njsj98qqesz0ppxff2yq4n.lmapp.run
     http.user_agent: undici
     http.content_type: undefined
     http.content_length: 0
     http.referer: undefined
     http.accept: */*
     http.accept_encoding: gzip, br
     http.accept_language: *
     http.authorization: [REDACTED]
     http.cf_ray: 9a33b22c1db6ac5e
     http.cf_connecting_ip: 142.180.185.49
     http.cf_country: CA
     http.status: ‚ùå 500
  2. ‚úÖ validateSession (29ms)
     service: AUTH_SERVICE
  3. ‚úÖ validateSession (26ms)
  4. ‚úÖ sql.all (26ms)
     üóÑÔ∏è  SQL Query: select "users"."id" as "userId", "users"."email", "sessions"."expires_at" from "sessions" inner join "users" on "users"."id" = "sessions"."user_id" where "sessions"."id" = ? and "sessions"."expires_at" > ?
     üìä meta: 0.2174ms, 2 rows read, ENAM, DB: 1832.0KB
  5. ‚ùå fetch (0ms)
     service: NOTIFICATION_SERVICE
  6. ‚úÖ sql.run (42ms)
     üóÑÔ∏è  SQL Query:
          INSERT INTO performance_metrics (operation, start_time, end_time, duration, success, meta_info, error, created_at)
          VALUES (?1, ?2, ?3, ?4, ?5, ?6, ?7, ?8)

     üìä meta: 1.4368ms, 2 rows read, 5 rows written, ENAM, DB: 1832.0KB
  7. ‚úÖ log
     level: ERROR
     message: API Gateway error
     fields: {"path":"/api/notifications/kI2lYulrk1Q1lK05VPfGW/read","method":"PATCH","error":"Illegal invocation: function called with incorrect `this` reference. See https://developers.cloudflare.com/workers/observability/errors/#illegal-invocation-errors for details.","stack":"TypeError: Illegal invocation: function called with incorrect `this` reference. See https://developers.cloudflare.com/workers/observability/errors/#illegal-invocation-errors for details.\n    at Proxy.<anonymous> (runtime.js:19245:34)\n    at api_gateway_default.fetch (index.js:18478:52)\n    at async runtime.js:18433:26\n    at async _Wrapper.<computed> [as fetch] (runtime.js:18344:16)"}

[11/23/2025, 4:17:53 PM] üîó Trace: 5a3274401dd5304640c52668201ca870 (83ms total)
  Org: org_01K8NJSJ98QQESZ0PPXFF2YQ4N, App: auditguard-v2, v01kap308m7dyxr5eftpgtn6epz, Script: api-gateway
  1. ‚úÖ fetch (83ms)
     organization.id: org_01K8NJSJ98QQESZ0PPXFF2YQ4N
     service.namespace: auditguard-v2
     service.name: api-gateway
     service.version: 01kap308m7dyxr5eftpgtn6epz
     http.method: PATCH
     http.url: https://svc-01kap30j21msacq6g59j0jjezr.01k8njsj98qqesz0ppxff2yq4n.lmapp.run/api/notifications/kI2lYulrk1Q1lK05VPfGW/read
     http.scheme: https
     http.host: svc-01kap30j21msacq6g59j0jjezr.01k8njsj98qqesz0ppxff2yq4n.lmapp.run
     http.user_agent: undici
     http.content_type: undefined
     http.content_length: 0
     http.referer: undefined
     http.accept: */*
     http.accept_encoding: gzip, br
     http.accept_language: *
     http.authorization: [REDACTED]
     http.cf_ray: 9a33b22c1eedaa9d
     http.cf_connecting_ip: 142.180.185.49
     http.cf_country: CA
     http.status: ‚ùå 500
  2. ‚úÖ validateSession (44ms)
     service: AUTH_SERVICE
  3. ‚úÖ validateSession (39ms)
  4. ‚úÖ sql.all (39ms)
     üóÑÔ∏è  SQL Query: select "users"."id" as "userId", "users"."email", "sessions"."expires_at" from "sessions" inner join "users" on "users"."id" = "sessions"."user_id" where "sessions"."id" = ? and "sessions"."expires_at" > ?
     üìä meta: 0.2344ms, 2 rows read, ENAM, DB: 1832.0KB
  5. ‚ùå fetch (0ms)
     service: NOTIFICATION_SERVICE
  6. ‚úÖ sql.run (39ms)
     üóÑÔ∏è  SQL Query:
          INSERT INTO performance_metrics (operation, start_time, end_time, duration, success, meta_info, error, created_at)
          VALUES (?1, ?2, ?3, ?4, ?5, ?6, ?7, ?8)

     üìä meta: 0.1965ms, 2 rows read, 5 rows written, ENAM, DB: 1832.0KB
  7. ‚úÖ log
     level: ERROR
     message: API Gateway error
     fields: {"path":"/api/notifications/kI2lYulrk1Q1lK05VPfGW/read","method":"PATCH","error":"Illegal invocation: function called with incorrect `this` reference. See https://developers.cloudflare.com/workers/observability/errors/#illegal-invocation-errors for details.","stack":"TypeError: Illegal invocation: function called with incorrect `this` reference. See https://developers.cloudflare.com/workers/observability/errors/#illegal-invocation-errors for details.\n    at Proxy.<anonymous> (runtime.js:19245:34)\n    at api_gateway_default.fetch (index.js:18478:52)\n    at async runtime.js:18433:26\n    at async _Wrapper.<computed> [as fetch] (runtime.js:18344:16)"}

patrick@DESKTOP-PC01:~/championship/auditguard-v2$


Download the React DevTools for a better development experience: https://reactjs.org/link/react-devtools react-dom.development.js:38560:17
API Error: 
Object { error: "API request failed", status: 500, details: undefined }
app-index.js:33:22
Failed to mark as read: 
Object { error: "API request failed", status: 500, details: undefined }
app-index.js:33:22
API Error: 
Object { error: "API request failed", status: 500, details: undefined }
app-index.js:33:22
Failed to mark as read: 
Object { error: "API request failed", status: 500, details: undefined }
app-index.js:33:22
API Error: 
Object { error: "API request failed", status: 500, details: undefined }
app-index.js:33:22
Failed to mark as read: 
Object { error: "API request failed", status: 500, details: undefined }
app-index.js:33:22


